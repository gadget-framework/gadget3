<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Changelog • gadget3</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><script src="../extra.js"></script><meta property="og:title" content="Changelog"><meta name="robots" content="noindex"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-news">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">gadget3</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="In-development version">0.13-0-999</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/introduction-single-stock.html">Introduction to gadget3: A single stock model</a>
    </li>
    <li>
      <a href="../articles/incorporating-observation-data.html">Incorporating observation data into models</a>
    </li>
    <li>
      <a href="../articles/multiple-substocks.html">Modelling maturity &amp; sex with multiple stocks</a>
    </li>
    <li>
      <a href="../articles/model-customisation.html">Model customisation</a>
    </li>
    <li>
      <a href="../articles/random-effects.html">Spawning &amp; Random effects</a>
    </li>
    <li>
      <a href="../articles/model-debugging.html">Debugging a gadget3 model</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">Advanced</li>
    <li>
      <a href="../articles/model-structure.html">Structure of a gadget3 model</a>
    </li>
    <li>
      <a href="../articles/writing_actions.html">Writing G3 Actions</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/gadget-framework/gadget3/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
      <h1 data-toc-skip>Changelog <small></small></h1>
      <small>Source: <a href="https://github.com/gadget-framework/gadget3/blob/master/NEWS.md" class="external-link"><code>NEWS.md</code></a></small>
    </div>

    <div class="section level2">
<h2 class="page-header" data-toc-text="0.13-0-999" id="gadget3-013-0-999">gadget3 0.13-0-999:<a class="anchor" aria-label="anchor" href="#gadget3-013-0-999"></a></h2>
<div class="section level3">
<h3 id="bug-fixes-0-13-0-999">Bug fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-0-13-0-999"></a></h3>
<ul><li>g3a_predate_catchability_project now correctly scales when quotas are expressed in individuals <a href="https://github.com/gadget-framework/gadget3/issues/222" class="external-link">#222</a></li>
<li>gadget3 resistant to packages (re)defining head/tail S3 methods, e.g. reformulas <a href="https://github.com/gadget-framework/gadget3/issues/224" class="external-link">#224</a></li>
<li>g3_param_project projections tending to zero in some cases <a href="https://github.com/gadget-framework/gadget3/issues/226" class="external-link">#226</a></li>
<li>g3_quota_hockeyfleet not overreporting when handed multiple stocks <a href="https://github.com/gadget-framework/gadget3/issues/227" class="external-link">#227</a></li>
<li>Allow for zero mean weight in weightjones <a href="https://github.com/gadget-framework/gadget3/issues/228" class="external-link">#228</a></li>
</ul></div>
<div class="section level3">
<h3 id="new-features-0-13-0-999">New features<a class="anchor" aria-label="anchor" href="#new-features-0-13-0-999"></a></h3>
<ul><li>Add g3a_trace_var, based on g3experiments::g3a_trace_nan <a href="https://github.com/gadget-framework/gadget3/issues/231" class="external-link">#231</a></li>
<li>Add g3a_trace_timings, for investigating relative action speed <a href="https://github.com/gadget-framework/gadget3/issues/235" class="external-link">#235</a></li>
<li>Add g3_tmb_fn(), for projection runs &amp; similar <a href="https://github.com/gadget-framework/gadget3/issues/237" class="external-link">#237</a></li>
</ul></div>
<div class="section level3">
<h3 id="breaking-changes-0-13-0-999">Breaking changes<a class="anchor" aria-label="anchor" href="#breaking-changes-0-13-0-999"></a></h3>
<ul><li>optimise defaults to FALSE unless default bounds are provided <a href="https://github.com/gadget-framework/gadget3/issues/233" class="external-link">#233</a></li>
<li>Don’t generate TMB ADGrad function if random effects not used <a href="https://github.com/gadget-framework/gadget3/issues/234" class="external-link">#234</a></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.13-0" id="gadget3-013-0">gadget3 0.13-0:<small>2025-04-19</small><a class="anchor" aria-label="anchor" href="#gadget3-013-0"></a></h2>
<div class="section level3">
<h3 id="bug-fixes-0-13-0">Bug fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-0-13-0"></a></h3>
<ul><li>All-zero lengthgroups in initialconditions / &gt; 1 maturity ratios no longer result in NaN <a href="https://github.com/gadget-framework/gadget3/issues/187" class="external-link">#187</a> <a href="https://github.com/gadget-framework/gadget3/issues/182" class="external-link">#182</a></li>
</ul></div>
<div class="section level3">
<h3 id="new-features-0-13-0">New features<a class="anchor" aria-label="anchor" href="#new-features-0-13-0"></a></h3>
<ul><li>The <code>stock</code> column in likelihood data can now contain name parts as well as full stock names</li>
<li>
<code>g3_to_r</code>-produced model functions will accept both a list &amp; data.frame parameter template</li>
<li>
<code>g3_to_r</code> models can include arbitary R functions, see vignettes/writing_actions <a href="https://github.com/gadget-framework/gadget3/issues/194" class="external-link">#194</a></li>
<li>Add <code>g3_array_agg</code>, <code>g3_array_combine</code> <a href="https://github.com/gadget-framework/gadget3/issues/193" class="external-link">#193</a> <a href="https://github.com/gadget-framework/gadget3/issues/213" class="external-link">#213</a></li>
<li>Add surplus production model action <code>g3a_spmodel</code> <a href="https://github.com/gadget-framework/gadget3/issues/209" class="external-link">#209</a></li>
<li>Projection / MSE support <a href="https://github.com/gadget-framework/gadget3/issues/210" class="external-link">#210</a> <a href="https://github.com/gadget-framework/gadget3/issues/220" class="external-link">#220</a>
<ul><li>Add g3_param_project() for time-varying parameters that also support projection</li>
<li>AR1/logAR1 distribution functions</li>
<li>Add g3_quota() for quota-definitions during projection based on a custom fishing year</li>
</ul></li>
<li>Add <code>g3_array_plot</code>
</li>
</ul></div>
<div class="section level3">
<h3 id="breaking-changes-0-13-0">Breaking changes<a class="anchor" aria-label="anchor" href="#breaking-changes-0-13-0"></a></h3>
<ul><li>run_projection is now TRUE by default for renewal. A rec.proj parameter covers projection.</li>
<li>Rename <code>detail_x__num</code> to <code>dstart_x__num</code> <a href="https://github.com/gadget-framework/gadget3/issues/200" class="external-link">#200</a></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.12-0" id="gadget3-012-0">gadget3 0.12-0:<a class="anchor" aria-label="anchor" href="#gadget3-012-0"></a></h2>
<div class="section level3">
<h3 id="bug-fixes-0-12-0">Bug fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-0-12-0"></a></h3>
<ul><li>
<code><a href="../reference/action_spawn.html">g3a_spawn()</a></code> splits offspring into multiple stocks correctly</li>
</ul></div>
<div class="section level3">
<h3 id="new-features-0-12-0">New features<a class="anchor" aria-label="anchor" href="#new-features-0-12-0"></a></h3>
<ul><li>Split likelihood distribution by predator_length / predator_age / predator_tag <a href="https://github.com/gadget-framework/gadget3/issues/154" class="external-link">#154</a></li>
<li>Predation support, see <code><a href="../reference/action_predate.html">?g3a_predate</a></code> / <code><a href="../reference/action_predate.html">?g3a_predate_catchability_predator</a></code> <a href="https://github.com/gadget-framework/gadget3/issues/29" class="external-link">#29</a></li>
<li>
<code>g3a_otherfood</code>, <code>g3a_otherfood_normalparam</code>, <code>g3a_otherfood_normalcv</code> <a href="https://github.com/gadget-framework/gadget3/issues/155" class="external-link">#155</a></li>
<li>Support length transform_fs in <code>g3l_catchdistribution</code> <a href="https://github.com/gadget-framework/gadget3/issues/95" class="external-link">#95</a></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.11-0" id="gadget3-011-0">gadget3 0.11-0:<a class="anchor" aria-label="anchor" href="#gadget3-011-0"></a></h2>
<div class="section level3">
<h3 id="bug-fixes-0-11-0">Bug fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-0-11-0"></a></h3>
<ul><li>g3_to_r() output can be debugged in R-Studio</li>
<li>Unknown stock names in likelihood data now an error</li>
<li>
<code>g3l_distribution_surveyindices_*()</code> can now be broken down by age without error</li>
</ul></div>
<div class="section level3">
<h3 id="new-features-0-11-0">New features<a class="anchor" aria-label="anchor" href="#new-features-0-11-0"></a></h3>
<ul><li>Add <code>g3_parameterized('x', by_year = 1998:2099)</code> to override year range for parameters</li>
<li>Add <code>g3a_initialconditions_normalcv</code> for initialconditions driven by a <code>lencv</code> parameter</li>
<li>Add <code>g3a_renewal_normalcv</code> for initialconditions driven by a <code>lencv</code> parameter</li>
<li>
<code>by_predator</code> parameter for <code>g3_parameterized</code>
</li>
<li>Defaults for <code>g3_suitability_exponentiall50</code>
</li>
<li>Support cut() formatted character columns as well as factor columns in likelihood observation data.</li>
<li>Add <code><a href="../reference/init_val.html">g3_init_val()</a></code> helper, to replace <code>gadgetutils::g3_init_guess()</code>
</li>
<li>Add <code><a href="../reference/stock_areas.html">g3_areas()</a></code> helper to create numbered area vectors</li>
<li>Add <code><a href="../reference/likelihood_distribution.html">g3_distribution_preview()</a></code> helper to see how observatation data will be converted to array</li>
<li>
<code>period</code> now optional for <code><a href="../reference/likelihood_random.html">g3l_random_walk()</a></code>, <code><a href="../reference/likelihood_random.html">g3l_random_dnorm()</a></code>
</li>
<li>
<code><a href="../reference/likelihood_bounds.html">g3l_bounds_penalty()</a></code> can now generate bounds from actions which update automatically</li>
</ul></div>
<div class="section level3">
<h3 id="breaking-changes-0-11-0">Breaking changes<a class="anchor" aria-label="anchor" href="#breaking-changes-0-11-0"></a></h3>
<ul><li>
<code>g3l_distribution_surveyindices_*</code> now default to <code>beta = 1</code>, set <code>beta = NULL</code> to restore previous behaviour.</li>
<li>
<code>stock_param</code>() &amp; <code>stock_param_table</code>() replaced with <code>stock_prepend</code>()</li>
<li>Remove unused <code>g3_to_tmb(adreport_re)</code> option <a href="https://github.com/gadget-framework/gadget3/issues/60" class="external-link">#60</a></li>
<li>Naturalmortality <code>M</code> now by-age by default <a href="https://github.com/gadget-framework/gadget3/issues/113" class="external-link">#113</a></li>
<li>
<code><a href="../reference/suitability.html">g3_suitability_andersenfleet()</a></code> now uses <code>by_predator = TRUE</code> by default <a href="https://github.com/gadget-framework/gadget3/issues/133" class="external-link">#133</a></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.10-0" id="gadget3-010-0">gadget3 0.10-0:<a class="anchor" aria-label="anchor" href="#gadget3-010-0"></a></h2>
<div class="section level3">
<h3 id="new-features-0-10-0">New features<a class="anchor" aria-label="anchor" href="#new-features-0-10-0"></a></h3>
<ul><li>Add <code>g3_parameterized('x', by_step = TRUE)</code> for seasonal parameters <a href="https://github.com/gadget-framework/gadget3/issues/115" class="external-link">#115</a></li>
<li>Support R factor levels as well as MFDB-style attributes for likelihood observation data. This means dplyr <code>group_by(length = cut(...))</code> can be used as well as MFDB for groupings <a href="https://github.com/gadget-framework/gadget3/issues/112" class="external-link">#112</a></li>
<li>Parameterised defaults for <code>g3l_understocking</code>(), <code>g3a_naturalmortality</code>(), <code>g3a_renewal_normalparam</code>()</li>
<li>Add <code>g3a_renewal_vonb_t0</code>() &amp; <code>g3a_renewal_vonb_recl</code>(), with <code>g3a_renewal_vonb</code>() being an alias to the latter</li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-0-10-0">Bug fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-0-10-0"></a></h3>
<ul><li>g3s_modeltime() (used for history) now works when final_year_steps set</li>
<li>Stop assuming 1-dimensional R arrays should be TMB vectors.</li>
</ul></div>
<div class="section level3">
<h3 id="breaking-changes-0-10-0">Breaking changes<a class="anchor" aria-label="anchor" href="#breaking-changes-0-10-0"></a></h3>
<ul><li>Remove <code>scale = 0.001</code> from default <code>K</code> parameters in g3a_grow, g3a_renew_*</li>
<li>
<code>g3a_renewal_vonb_t0</code>() is now the default mean_f for <code>*_normalparam</code>()</li>
<li>
<code>g3a_initialconditions_normalparam</code>() now offsets any <code>age</code> in <code>mean_f</code> (i.e. the VonB formula) by <code>cur_step_size</code>, in effect running at step -1.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.9-0" id="gadget3-09-0">gadget3 0.9-0:<small>2023-05-18</small><a class="anchor" aria-label="anchor" href="#gadget3-09-0"></a></h2>
<div class="section level3">
<h3 id="bug-fixes-0-9-0">Bug fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-0-9-0"></a></h3>
<ul><li>
<code><a href="../reference/suitability.html">g3_suitability_andersen()</a></code> now produces sensible values - <a href="https://github.com/gadget-framework/gadget3/issues/108" class="external-link uri">https://github.com/gadget-framework/gadget3/issues/108</a>
</li>
<li>
<code><a href="../reference/action_age.html">g3a_age()</a></code> now supports stocks with a single age (i.e. minage == maxage)</li>
</ul></div>
<div class="section level3">
<h3 id="new-features-0-9-0">New features<a class="anchor" aria-label="anchor" href="#new-features-0-9-0"></a></h3>
<ul><li>Add <code>recage</code> parameter to <code>g3a_renewal_vonb</code> / <code>g3a_renewal_initabund</code>
</li>
<li>Add <code><a href="../reference/suitability.html">g3_suitability_andersenfleet()</a></code>, a fleet-specialised andsersen suitability function.</li>
<li>Make <code><a href="../reference/stock.html">g3_is_stock()</a></code> public</li>
<li>
<code><a href="../reference/eval.html">g3_eval()</a></code>, to evaluate snippets of a gadget3 model.</li>
</ul></div>
<div class="section level3">
<h3 id="breaking-changes-0-9-0">Breaking changes<a class="anchor" aria-label="anchor" href="#breaking-changes-0-9-0"></a></h3>
<ul><li><p><code>g3l_distribution_*(transform_fs = ...)</code> now happens before aggregation, not after. Any matrix used now has to be expressed in terms of the stock, not aggregated age.</p></li>
<li><p><code><a href="../reference/language.html">g3_param_table()</a></code> now returns NaN (and warns) on a missing value, instead of aborting.</p></li>
<li><p><code>optim(g3_tmb_par(...))</code> is now an error. When optimising, always use <code>obj.fun$par</code>.</p></li>
</ul></div>
<div class="section level3">
<h3 id="new-features-0-9-0-1">New features<a class="anchor" aria-label="anchor" href="#new-features-0-9-0-1"></a></h3>
<ul><li>Support <code>as.vector(array)</code> in TMB formulas, so arrays can be used with TMB vectorized functions, e.g. <code>pnorm(as.vector(ar[,1]))</code>.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="page-header" data-toc-text="0.8-0" id="gadget3-08-0">gadget3 0.8-0:<a class="anchor" aria-label="anchor" href="#gadget3-08-0"></a></h2>
<div class="section level3">
<h3 id="new-features-0-8-0">New features<a class="anchor" aria-label="anchor" href="#new-features-0-8-0"></a></h3>
<ul><li>Initial CRAN release</li>
</ul></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>

</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Jamie Lentin, Bjarki Thor Elvarsson, William Butler.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

      </footer></div>






  </body></html>

